{% extends "layout.html" %}
{% block content %}
<form action="" method="post">
<table>
		<tr>
			<td>
				<label>ID
				{{ post.id }}
				</label>
			</td>
                <td colspan="2">
                </td>
			<td rowspan="4">
				<label> Rols<br>
                    {% set var = {'v': True} %}
                    {% for rol in rols %}
                            {% for ti in tip %}
                            {% if ti.id_rol == rol.id_rol %}
                                    <input type="hidden" name="rol" value="">
                                    <input type="checkbox" name="rol" value={{rol.id_rol}} checked="True"/> 
                                        {{ rol.nom_rol }}<br>
                                    <input type="date" name="inici" value={{ ti.inici }}>
                                    <input type="date" name="fi" value={{ ti.fi }}>
                                    {% if var.update({'v': False}) %} {% endif %}
                                {% endif %}
                            {% endfor %}
                            {% if var.v %}
                                <input type="hidden" name="rol" value="">
                                <input type="checkbox" name="rol" value={{rol.id_rol}}/> {{ rol.nom_rol }}<br>
                                <input type="date" name="inici">
                                <input type="date" name="fi">
                            {% endif %}
                            {% if var.update({'v': True}) %} {% endif %}
                    {% endfor %}
                    </label>
			</td>
            </tr>
            <tr>
                    <td>
                        <label>Nom
					<input type="text" name="nom" value="{{post.nom}}" pattern="([A-Za-z ]{1,50})"/>
			      	</label>
                        </td>
                        <td>
			      	<label>Cognom 1
			        	<input type="text" name="cognom1" value="{{post.cognom1}}" pattern=".{0}|([A-Za-z ]{1,50})"/>
			      	</label>
                        </td>
                        <td>
			      	<label>Cognom 2
			        	<input type="text" name="cognom2" value="{{post.cognom2}}" pattern=".{0}|([A-Za-z ]{1,50})"/>
			      	</label>
                        </td>
            </tr>
            <tr>
                        <td>
			      	<label>Sexe
        				<select id="sexe" name="sexe" size="1">
                    			<option value="{{post.sexe}}" selected="selected">
        					{% if 1 == post.sexe|int() %}
        						Home
        					{% elif 0 == post.sexe|int() %}
        						Dona
        					{% endif %}
        					</option>
                        		<option value="1">Home</option>
            		        	<option value="0">Dona</option>
        	        		</select>
        				</label>
                      </td>
                      <td>
        				<label>DNI
                	                <input type="text" name="dni" value="{{post.dni}}" pattern=".{0}|([0-9]{8})+([a-z]{1})"/>
                	        	</label>
                      </td>
                      <td>
        				<label>PASSPORT
                	                <input type="text" name="passport" value="{{post.passport}}"/>
	                      </label>
                      </td>
            </tr>
            <tr>
                      <td>
        				<label>Data Naixement
                        	        <input type="date" name="data_naix" value="{{post.data_naix}}"/>
                          	</label>
                        </td>
                        <td>
            			<label>Telefon 1
                                 	<input type="text" name="telefon1" value="{{post.telefon1}}" pattern="[0-9]{9}"/>
                           	</label>
                        </td>
                        <td>
                            <label>Telefon 2
                                <input type="text" name="telefon2" value="{{post.telefon2}}" pattern="[0-9]{9}"/>
                            </label>
                        </td>
            </tr>
            <tr>
                        <td>
                            <label>Email 1
                                <input type="email" name="email1" value="{{post.email1}}"/>
                            </label>
                        </td>
                        <td>
                            <label>Email 2
                                    <input type="email" name="email2" value="{{post.email2}}"/>
                            </label>
                        </td>
                        <td>
                            <label>Actiu
                                <select id="actiu" name="actiu" size="1">
        				        <option value="{{post.actiu}}" selected="selected">
        						{% if post.actiu|int() == 1 %}
        							Si
        						{% elif post.actiu|int() == 0 %}
        							No
        						{% endif %}
                                    </option>
                                    <option value="1">Si</option>
                                    <option value="0">No</option>	
                                </select>
                            </label>
                        </td>
                        <td rowspan="2">
                            Assignaci√≥ de permisos<br>
                    {% set var = {'c': True} %}
                    {% for grup in grups %}
                            {% for perm_grup in perm_grup %}
                                {% for perm_asig in perm_asig %}
                                    {% if var.c and perm_asig.id_permis == perm_grup.id_permis %}
                                            <input type="hidden" name="grup" value="">
                                            <input type="checkbox" name="grup" value={{grup.id_grup}} checked="True"/> 
                                                {{ grup.nom_grup }}<br>
                                            <input type="date" name="inici_permis" value={{ perm_asig.inici_permis }}>
                                            <input type="date" name="fi_permis" value={{ perm_asig.fi_permis }}>
                                            {% if var.update({'c': False}) %} {% endif %}
                                        {% endif %}
                                {% endfor %}
                            {% endfor %}
                            {% if var.c %}
                                vacio<br>    
                                <input type="hidden" name="grup" value="">
                                <input type="checkbox" name="grup" value={{grup.id_grup}}/> {{ grup.nom_grup }}<br>
                                <input type="date" name="inici_permis">
                                <input type="date" name="fi_permis">
                            {% endif %}
                            {% if var.update({'c': True}) %} {% endif %}
                    {% endfor %}
                            
                        </td>
            </tr>
            <tr>
			<td>
				<button class="button postfix" type="submit">Edit</button>
                </td>
        		<td>
        			<a href="/" class="button postfix">Enrere</a>
                </td>
			<td>
				Foto
        			<input type="text" name="foto" value="{{post.foto}}"/>
        			<a href="/upload" class="button postfix">Puja'n una</a>				
</form>         </td>
		</tr>
</table>
{% endblock %}
